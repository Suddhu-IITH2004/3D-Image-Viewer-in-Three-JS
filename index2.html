<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>3D Model Display</title>
    <style>
        body {
            margin-top: 5px;
            background-color:rgb(19, 19, 19);
            padding-left: 8%;
        }
        
        #buttons-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            padding-left: 5px;
        }

        .button {
            margin: 0 10;
            margin-left: 20;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }

        .fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9999;
        }
        .heading{
            color:blue;
            padding-left: 40%;
            font-weight: bolder;
            font-size: larger;
        }
        .name{
            color: aquamarine;
            padding-left: 40%;
        }
    </style>
</head>
<body>
    <section class="content">
    <div class="heading">
        <h1>3D-IMAGE VIEWER </h1></div>
</section>
    <div id="canvas-container">
        <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/GLTFLoader.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
        <script>
            // Scene setup
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(
                20,
                window.innerWidth / window.innerHeight,
                0.1,
                10000
            );
            // Set camera position
            camera.position.z = 5;
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth * 0.8, window.innerHeight * 0.8);
            document.getElementById("canvas-container").appendChild(renderer.domElement);

            // Load 3D model
            const loader = new THREE.GLTFLoader();
            loader.load(
                "model.gltf",
                function (gltf) {
                    scene.add(gltf.scene);
                },
                undefined,
                function (error) {
                    console.error(error);
                }
            );

            // Add lights
            const light = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(light);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 1);
            scene.add(directionalLight);

            // Add controls
            const controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true; // Add smooth damping to the controls
            controls.dampingFactor = 0.05; // Adjust the damping factor

            // Animation loop
            function animate() {
                requestAnimationFrame(animate);
                controls.update(); // Update the controls
                renderer.render(scene, camera);
            }
            animate();

            // Full screen button
            const fullScreenButton = document.createElement('button');
            fullScreenButton.innerHTML = 'Full Screen';
            fullScreenButton.classList.add('button');
            fullScreenButton.addEventListener('click', function() {
                enterFullscreen();
            });

            // VR button
            const vrButton = document.createElement('button');
            vrButton.innerHTML = 'VR';
            vrButton.classList.add('button');
            vrButton.addEventListener('click', function() {
                enableVR();
            });

            // Enable VR functionality
            function enableVR() {
                renderer.xr.enabled = true;
                if (renderer.xr.isPresenting) {
                    renderer.xr.exitPresent();
                } else {
                    renderer.xr.requestPresent({ select: true });
                }
            }

            // Enter fullscreen mode
            function enterFullscreen() {
                const canvasContainer = document.getElementById("canvas-container");
                if (canvasContainer.requestFullscreen) {
                    canvasContainer.requestFullscreen();
                    renderer.setSize(window.innerWidth * 1.5, window.innerHeight * 1.5) ;
                } else if (canvasContainer.mozRequestFullScreen) { // Firefox
                    canvasContainer.mozRequestFullScreen();
                } else if (canvasContainer.webkitRequestFullscreen) { // Chrome, Safari and Opera
                    canvasContainer.webkitRequestFullscreen();
                    renderer.setSize(window.innerWidth * 1.5, window.innerHeight * 1.5) ;
                } else if (canvasContainer.msRequestFullscreen) { // IE/Edge
                    canvasContainer.msRequestFullscreen();
                }
            }

            // Exit fullscreen mode
            function exitFullscreen() {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                    renderer.setSize(window.innerWidth * 0.8, window.innerHeight * 0.8);
                } else if (document.mozCancelFullScreen) { // Firefox
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { // Chrome, Safari and Opera
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { // IE/Edge
                    document.msExitFullscreen();
                }
            }

            // Listen for fullscreen change event
            document.addEventListener('fullscreenchange', function() {
                if (!document.fullscreenElement) {
                    exitFullscreen();
                }
            });

            // Append buttons to the buttons container
            const buttonsContainer = document.createElement('div');
            buttonsContainer.id = 'buttons-container';
            buttonsContainer.appendChild(fullScreenButton);
            buttonsContainer.appendChild(vrButton);
            document.body.appendChild(buttonsContainer);
        </script>
    <!-- </div>
    <div class="name">Brandenburg Gate</div> -->
</body>
</html>
